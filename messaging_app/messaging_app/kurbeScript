#!/bin/bash

# kurbeScript.sh
# Script to start a local Kubernetes cluster and verify it's running

echo "🚀 Starting Kubernetes cluster with Minikube..."

# Start the cluster (if already running, it will just check status)
minikube start

# Check if minikube started successfully
if [ $? -ne 0 ]; then
  echo "❌ Failed to start Kubernetes cluster."
  exit 1
fi

echo "✅ Kubernetes cluster started."

# Verify cluster info
echo "🔍 Verifying cluster status..."
kubectl cluster-info

if [ $? -ne 0 ]; then
  echo "❌ kubectl is not able to connect to the cluster."
  exit 1
fi

echo "✅ kubectl is connected to the cluster."

# Retrieve available pods across all namespaces
echo "📦 Retrieving available pods..."
kubectl get pods -A

echo "🎉 Done!"