#!/bin/bash

# kurbeScript.sh
# Script to start a local Kubernetes cluster and verify it's running

echo "ğŸš€ Starting Kubernetes cluster with Minikube..."

# Start the cluster (if already running, it will just check status)
minikube start

# Check if minikube started successfully
if [ $? -ne 0 ]; then
  echo "âŒ Failed to start Kubernetes cluster."
  exit 1
fi

echo "âœ… Kubernetes cluster started."

# Verify cluster info
echo "ğŸ” Verifying cluster status..."
kubectl cluster-info

if [ $? -ne 0 ]; then
  echo "âŒ kubectl is not able to connect to the cluster."
  exit 1
fi

echo "âœ… kubectl is connected to the cluster."

# Retrieve available pods across all namespaces
echo "ğŸ“¦ Retrieving available pods..."
kubectl get pods -A

echo "ğŸ‰ Done!"